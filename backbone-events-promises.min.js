/*!
 * backbone-events-promises.js 0.2.0
 * (c) 2014 Shoptology
 * backbone-events-promises.js may be freely distributed under the MIT license.
 *
 * Changelog:
 * 0.2.0 - AMD and CommonJS module support
 * 0.1.1 - README update
 * 0.1.0 - initial public release
 */
!function(a,b){"use strict";var c=a.Backbone;"function"==typeof define&&define.amd?define(["exports","backbone","underscore","jquery"],b):"object"==typeof exports?b(exports,require("backbone","underscore","jquery")):b(a.commonJsStrict={},c,a._,c.$)}(this,function(a,b,c,d){var e=function(a){b.Events.promises=function(d,e,f){var g;if(void 0===d&&(d=!0),f=f||{},f=c.extend({method:"trigger"},f),g=f.method,e||(e=b.Events),!d){if(!e._promises)return;if(!e._promises.original)return;return g=e._promises.method,e[g]=e._promises.original,delete e._promises,e}if(d){if(e._promises)return;e._promises=c.extend(f,{original:e[g]}),e[g]=a}}},f=[],g=(f.push,f.slice),h=(f.splice,/\s+/),i=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(h.test(c)){for(var f=c.split(h),g=0,i=f.length;i>g;g++)a[b].apply(a,[f[g]].concat(d));return!1}return!0},j=function(a){if(!this._events)return d.when();var b=g.call(arguments,1);if(!i(this,"trigger",a,b))return d.when();var c=this._events[a],e=this._events.all;return c?k(c,b):e?k(e,arguments):d.when()},k=function(a,b){var c,e=-1,f=a.length,g=b[0],h=b[1],i=b[2],j=[];switch(b.length){case 0:for(;++e<f;)j.push((c=a[e]).callback.call(c.ctx));break;case 1:for(;++e<f;)j.push((c=a[e]).callback.call(c.ctx,g));break;case 2:for(;++e<f;)j.push((c=a[e]).callback.call(c.ctx,g,h));break;case 3:for(;++e<f;)j.push((c=a[e]).callback.call(c.ctx,g,h,i));break;default:for(;++e<f;)j.push((c=a[e]).callback.apply(c.ctx,b))}return d.when.apply(d,j)};e(j,k)});
//# sourceMappingURL=backbone-events-promises.min.map